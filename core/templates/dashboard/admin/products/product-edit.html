{% extends "dashboard/admin/base.html" %}
{% load static %}
{% block title %}ویرایش محصول{% endblock title %}


{% block extra_css %}
<style>
    .small-primary-button {
        padding: 3px 10px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 10px;
        border-radius: 5px;
    }

    .small-primary-button:hover,
    .small-primary-button:focus {
        background-color: #0056b3;
    }

    .theme-btn {
        transition: 0.3s ease;
    }

    .theme-btn:hover {
        opacity: 0.85;
        transform: translateY(-2px);
    }

    .delete-btn {
        background-color: #dc3545 !important;
        border-color: #dc3545 !important;
        color: #fff !important;
    }

    .delete-btn:hover {
        background-color: #c82333 !important;
        border-color: #c82333 !important;
        color: #fff !important;
    }
</style>
{% endblock %}


{% block header %}
<div class="site-breadcrumb">
    <div class="site-breadcrumb-bg" style="background: url({% static 'img/breadcrumb/01.jpg' %})"></div>
    <div class="container">
        <div class="site-breadcrumb-wrap">
            <h4 class="breadcrumb-title">داشبورد مدیر</h4>
            <ul class="breadcrumb-menu">
                <li><a href="{% url 'website:index' %}"><i class="far fa-home"></i> صفحه اصلی</a></li>
                <li class="active">ویرایش محصول</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="col-lg-9">
    <div class="user-wrapper">
        <div class="user-card">
            <div class="user-card-header">
                <h4 class="user-card-title">ویرایش محصول</h4>
                <a href="{% url 'dashboard:admin:product-list' %}" class="theme-btn"><span class="far fa-arrow-right"></span>همه
                    محصولات</a>
            </div>
            <div class="col-lg-12">
                <div class="user-form">
                    <h6 class="mb-20">اطلاعات پایه</h6>
                    <form action="." method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row align-items-center">
                            <div class="col-lg-12">
                                <div class="form-group">
                                    <label>نام محصول</label>
                                    {{form.title}}
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label>دسته بندی</label>
                                    {{form.category}}
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <label>slug محصول - <button class="small-primary-button" type="button"
                                        onclick="generateSlug()">ساختslug</button>
                                </label>
                                {{form.slug}}
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>قیمت</label>
                                {{form.price}}
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>درصد تخفیف </label>
                                {{form.discount_percent}}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label> توضیح کوتاه</label>
                                {{form.brief_description}}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>توضیحات </label>
                                {{form.description}}
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label>تعداد</label>
                                    {{form.stock}}
                                </div>
                            </div>
                            <h6 class="mt-20 mb-20">آپلود تصاویر</h6>
                            {{form.image}}
                            <h6 class="mt-20 mb-20">وضعیت</h6>
                            {{form.status}}
                        </div>
                        <button type="submit" class="theme-btn">
                            <span class="far fa-save"></span> ذخیره تغییرات
                        </button>

                        <a href="{% url 'dashboard:admin:product-delete' pk=object.pk %}" class="btn btn-danger theme-btn delete-btn">
                            <span class="far fa-trash-alt"></span> حذف
                        </a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>

{% endblock content %}

{% block extra_js %}

<script>
    function generateSlug() {
        const title = $("#id_title").val();
        const slug = slugify(title);
        $("#id_slug").val(slug)
    }

    function slugify(titleStr) {
        titleStr = titleStr.replace(/^\s+|\s+$/g, '');
        titleStr = titleStr.toLowerCase();
        //persian support
        titleStr = titleStr.replace(/[^a-z0-9_\s-ءاأإآؤئبتثجحخدذرزسشصضطظعغفقكلمنهويةى]#u/, '')
            // Collapse whitespace and replace by -
            .replace(/\s+/g, '-')
            // Collapse dashes
            .replace(/-+/g, '-');
        slugStr = titleStr;
        return slugStr;
    }
</script>

{% endblock %}